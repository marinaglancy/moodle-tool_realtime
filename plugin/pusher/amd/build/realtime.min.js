/**
 * Real time events using Pusher
 *
 * @module     realtimeplugin_pusher/realtime
 * @copyright  2020 Daniel Conquit, Matthew Gray, Nicholas Parker, Dan Thistlethwaite
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
require.config({enforceDefine:!1,paths:{"pusher-7.0":"https://js.pusher.com/7.0/pusher"}}),define("realtimeplugin_pusher/realtime",["core/pubsub","tool_realtime/events","pusher-7.0"],(function(PubSub,RealTimeEvents,Pusher){var params,pubSub=PubSub,realTimeEvents=RealTimeEvents;return{init:function(userId,app_id,key,secret,cluster){params&&params.userid||(params={app_id:app_id,key:key,secret:secret,cluster:cluster})},subscribe:function(hash,context,component,area,itemid,channel){new Pusher(params.key,{cluster:params.cluster}).subscribe(hash).bind("event",(function(data){let payload;try{payload=JSON.parse(data)}catch(_){payload=[]}var dataToSend={context:context,component:component,area:area,itemid:itemid,channel:channel,payload:payload};pubSub.publish(realTimeEvents.EVENT,dataToSend)}))}}}));

//# sourceMappingURL=realtime.min.js.map